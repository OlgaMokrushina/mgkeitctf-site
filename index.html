<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MGKEITCTF ‚Äî 3 —É—Ä–æ–≤–Ω—è (–ø–æ—à–∞–≥–æ–≤–æ)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .card { box-shadow: 0 10px 30px rgba(0,0,0,.12), inset 0 0 0 1px rgba(255,255,255,.06); }
    .glow { text-shadow: 0 0 20px rgba(59,130,246,.35); }
    .step { background: #0b1220; border: 1px solid #1f2a44; }
    .step-active { background: linear-gradient(90deg, #60a5fa, #a78bfa); color: #0b1220; font-weight: 700; }
    .confetti { position: fixed; top: -10px; width: 8px; height: 14px; opacity: .9; animation: fall linear forwards; }
    @keyframes fall { to { transform: translateY(110vh) rotate(360deg); opacity: .95; } }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-900 via-indigo-950 to-slate-900 text-slate-100">
  <header class="max-w-5xl mx-auto px-4 pt-10 pb-6">
    <h1 class="text-3xl md:text-4xl font-bold glow">MGKEITCTF ‚Äî —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–π –º–∏–Ω–∏‚Äë—Å–∞–π—Ç</h1>
    <p class="mt-3 text-slate-300">–§–æ—Ä–º–∞—Ç —Ñ–ª–∞–≥–∞ <code class="px-1 rounded bg-slate-800">MGKEITCTF{...}</code>. –£—Ä–æ–≤–Ω–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è <strong>–ø–æ –æ–¥–Ω–æ–º—É</strong>. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–æ–≤ –∏–¥—ë—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.</p>
  </header>

  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è-—Å—Ç–µ–ø–ø–µ—Ä -->
  <section class="max-w-5xl mx-auto px-4">
    <div class="grid grid-cols-3 gap-3">
      <button id="stepBtn1" class="step rounded-2xl p-3 text-center" onclick="goto(1)">–£—Ä–æ–≤–µ–Ω—å 1</button>
      <button id="stepBtn2" class="step rounded-2xl p-3 text-center" onclick="goto(2)">–£—Ä–æ–≤–µ–Ω—å 2</button>
      <button id="stepBtn3" class="step rounded-2xl p-3 text-center" onclick="goto(3)">–£—Ä–æ–≤–µ–Ω—å 3</button>
    </div>
  </section>

  <main class="max-w-5xl mx-auto px-4 py-8 space-y-6">
    <div class="flex gap-3 items-end">
      <label class="text-sm text-slate-300">–ù–∏–∫/–§–ò–û (–¥–ª—è –∑–∞—á—ë—Ç–∞):</label>
      <input id="user" type="text" placeholder="anon" class="rounded-xl bg-slate-800/80 border border-slate-700 px-3 py-2 outline-none focus:ring-2 focus:ring-indigo-500"/>
    </div>

    <!-- L1 -->
    <section id="level1" class="card rounded-3xl border border-slate-800 p-6 bg-slate-900/60">
      <h2 class="text-2xl font-semibold">–£—Ä–æ–≤–µ–Ω—å 1 ‚Äî Base64</h2>
      <p class="mt-1 text-slate-300">–î–µ–∫–æ–¥–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É –∏ –≤–≤–µ–¥–∏—Ç–µ —Ñ–ª–∞–≥ —Ü–µ–ª–∏–∫–æ–º.</p>
      <div class="mt-4 p-4 rounded-xl bg-slate-800/70 font-mono select-all overflow-x-auto">TUdLRUlUQ1RGe2hlbGxvX3dvcmxkfQ==</div>
      <div class="mt-4 flex flex-col sm:flex-row gap-3">
        <input id="flag1" type="text" placeholder="MGKEITCTF{...}" class="w-full sm:flex-1 rounded-xl bg-slate-800/80 border border-slate-700 px-4 py-3 outline-none focus:ring-2 focus:ring-indigo-500 font-mono" />
        <button onclick="check(1)" class="rounded-xl px-5 py-3 bg-indigo-600 hover:bg-indigo-500 active:scale-[.99] transition">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      </div>
      <p id="msg1" class="mt-3 text-sm"></p>
      <div class="mt-4 hidden" id="next1">
        <button onclick="goto(2)" class="rounded-xl px-5 py-3 bg-emerald-600 hover:bg-emerald-500">–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 2 ‚Üì</button>
      </div>
    </section>

    <!-- L2 -->
    <section id="level2" class="card rounded-3xl border border-slate-800 p-6 bg-slate-900/40 hidden">
      <h2 class="text-2xl font-semibold">–£—Ä–æ–≤–µ–Ω—å 2 ‚Äî –°–¥–≤–∏–≥ –¶–µ–∑–∞—Ä—è</h2>
      <p class="mt-1 text-slate-300">–í–Ω—É—Ç—Ä–∏ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–æ–∫ –ø—Ä–∏–º–µ–Ω—ë–Ω —Å–¥–≤–∏–≥ <strong>+4</strong>. –í–µ—Ä–Ω–∏—Ç–µ –Ω–∞–∑–∞–¥.</p>
      <div class="mt-4 p-4 rounded-xl bg-slate-800/70 font-mono overflow-x-auto">MGKEITCTF{jmb_xli_psmkmg}</div>
      <details class="mt-3 text-slate-400"><summary class="cursor-pointer hover:text-slate-200">–ü–æ–¥—Å–∫–∞–∑–∫–∞</summary><div class="mt-2 text-slate-300">a‚Üíw, b‚Üíx, c‚Üíy, d‚Üíz, e‚Üía‚Ä¶</div></details>
      <div class="mt-4 flex flex-col sm:flex-row gap-3">
        <input id="flag2" type="text" placeholder="MGKEITCTF{...}" class="w-full sm:flex-1 rounded-xl bg-slate-800/80 border border-slate-700 px-4 py-3 outline-none focus:ring-2 focus:ring-indigo-500 font-mono" />
        <button onclick="check(2)" class="rounded-xl px-5 py-3 bg-indigo-600 hover:bg-indigo-500 active:scale-[.99] transition">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      </div>
      <p id="msg2" class="mt-3 text-sm"></p>
      <div class="mt-4 hidden" id="next2">
        <button onclick="goto(3)" class="rounded-xl px-5 py-3 bg-emerald-600 hover:bg-emerald-500">–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 3 ‚Üì</button>
      </div>
    </section>

    <!-- L3 -->
    <section id="level3" class="card rounded-3xl border border-slate-800 p-6 bg-slate-900/20 hidden">
      <h2 class="text-2xl font-semibold">–£—Ä–æ–≤–µ–Ω—å 3 ‚Äî –ü–æ–∏—Å–∫ –≤ –∫–æ–¥–µ</h2>
      <p class="mt-1 text-slate-300">–§–ª–∞–≥ —Å–ø—Ä—è—Ç–∞–Ω –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã / –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–µ. –ù–∞–π–¥–∏—Ç–µ –∏ –≤–≤–µ–¥–∏—Ç–µ.</p>
      <!-- FULL FLAG FOR LEVEL 3: MGKEITCTF{web_warrior} -->
      <div id="flag-explicit" data-flag="MGKEITCTF{web_warrior}" style="display:none" aria-hidden="true"></div>
      <p style="display:none" id="flag-plain">MGKEITCTF{web_warrior}</p>

      <div class="mt-4 flex flex-col sm:flex-row gap-3">
        <input id="flag3" type="text" placeholder="MGKEITCTF{...}" class="w-full sm:flex-1 rounded-xl bg-slate-800/80 border border-slate-700 px-4 py-3 outline-none focus:ring-2 focus:ring-indigo-500 font-mono" />
        <button onclick="check(3)" class="rounded-xl px-5 py-3 bg-indigo-600 hover:bg-indigo-500 active:scale-[.99] transition">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      </div>
      <p id="msg3" class="mt-3 text-sm"></p>
      <div class="mt-4 hidden" id="next3">
        <button onclick="celebrate()" class="rounded-xl px-5 py-3 bg-fuchsia-600 hover:bg-fuchsia-500">–£—Ä–∞! –ß—Ç–æ –¥–∞–ª—å—à–µ?</button>
      </div>
    </section>

    <!-- –§–∏–Ω–∞–ª -->
    <section id="finish" class="card rounded-3xl border border-slate-800 p-8 bg-slate-900/30 hidden text-center">
      <h2 class="text-3xl font-bold">–°—É–ø–µ—Ä! –¢—ã –ø—Ä–æ—à—ë–ª –≤—Å–µ —É—Ä–æ–≤–Ω–∏ üéâ</h2>
      <p class="mt-2 text-slate-300">–ú–æ–∂–µ—à—å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ª—é–±–æ–º—É —É—Ä–æ–≤–Ω—é —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ –≤—ã—à–µ.</p>
      <div class="mt-4 flex justify-center gap-3">
        <button onclick="location.reload()" class="rounded-xl px-5 py-3 bg-slate-800 border border-slate-700 hover:bg-slate-700">–°–±—Ä–æ—Å–∏—Ç—å</button>
        <button onclick="spawnConfetti()" class="rounded-xl px-5 py-3 bg-emerald-600 hover:bg-emerald-500">–ï—â—ë –∫–æ–Ω—Ñ–µ—Ç—Ç–∏</button>
      </div>
    </section>
  </main>

  <footer class="max-w-5xl mx-auto px-4 pb-12 text-slate-400 text-sm">
    <p>–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä: –≤—Å–µ —Ç–µ–∫—Å—Ç—ã –º–æ–∂–Ω–æ –ø—Ä–∞–≤–∏—Ç—å –≤ HTML. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–æ–≤ ‚Äî —á–µ—Ä–µ–∑ Cloudflare Worker.</p>
  </footer>

  <script>
    const CHECK_URL = "https://mgkeit-check.mokrushinaolllya.workers.dev";

    function markStepper(active) {
      for (let i=1;i<=3;i++) {
        const b = document.getElementById('stepBtn'+i);
        b.classList.remove('step-active');
      }
      document.getElementById('stepBtn'+active).classList.add('step-active');
    }

    function goto(n) {
      for (let i=1;i<=3;i++) document.getElementById('level'+i).classList.add('hidden');
      document.getElementById('level'+n).classList.remove('hidden');
      markStepper(n);
      window.scrollTo({ top: document.getElementById('level'+n).offsetTop - 20, behavior: 'smooth' });
    }

    async function check(n) {
      const inp = document.getElementById('flag'+n);
      const msg = document.getElementById('msg'+n);
      const user = document.getElementById('user').value || 'anon';
      msg.textContent = '–ü—Ä–æ–≤–µ—Ä—è—é‚Ä¶';
      msg.className = 'mt-3 text-sm text-slate-300';
      try {
        const res = await fetch(CHECK_URL, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ flag: inp.value.trim(), level: n, user }) });
        const data = await res.json();
        if (data && data.ok) {
          const texts = {1:'–ú–æ–ª–æ–¥–µ—Ü! –ü–µ—Ä–µ—Ö–æ–¥–∏ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 2 ‚Üì', 2:'–û—Ç–ª–∏—á–Ω–æ! –ü–µ—Ä–µ—Ö–æ–¥–∏ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 3 ‚Üì', 3:'–°—É–ø–µ—Ä! –¢—ã –ø—Ä–æ—à—ë–ª –≤—Å–µ —É—Ä–æ–≤–Ω–∏ üéâ'};
          msg.textContent = texts[n];
          msg.className = 'mt-3 text-sm text-emerald-400';
          if (n < 3) {
            document.getElementById('next'+n).classList.remove('hidden');
            setTimeout(()=>goto(n+1), 900);
          } else {
            document.getElementById('next3').classList.remove('hidden');
            celebrate();
          }
        } else {
          msg.textContent = '–ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç –∏ —Ä–µ—à–µ–Ω–∏–µ.';
          msg.className = 'mt-3 text-sm text-rose-400';
        }
      } catch (e) {
        msg.textContent = '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º –ø—Ä–æ–≤–µ—Ä–∫–∏.';
        msg.className = 'mt-3 text-sm text-rose-400';
      }
    }

    function celebrate(){
      document.getElementById('finish').classList.remove('hidden');
      spawnConfetti();
    }

    function spawnConfetti() {
      const colors = ['#60a5fa','#a78bfa','#34d399','#f472b6','#f59e0b','#eab308'];
      for (let i=0;i<60;i++) {
        const d = document.createElement('div');
        d.className = 'confetti';
        d.style.left = Math.random()*100 + 'vw';
        d.style.background = colors[Math.floor(Math.random()*colors.length)];
        d.style.animationDuration = (1.5 + Math.random()*1.5) + 's';
        d.style.transform = 'rotate(' + (Math.random()*360) + 'deg)';
        document.body.appendChild(d);
        setTimeout(()=>d.remove(), 3000);
      }
    }

    // —Å—Ç–∞—Ä—Ç —Å –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è
    goto(1);
  </script>
</body>
</html>
